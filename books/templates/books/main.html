<!DOCTYPE html>
<html>
<head>
    <title>Bookland â€“ Hauptseite</title>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const input = document.getElementById("searchInput");
            const results = document.getElementById("bookResults");

            input.addEventListener("keyup", function () {
                const query = input.value;
                fetch(`/search-books/?query=${encodeURIComponent(query)}`)
                    .then(response => response.text())
                    .then(html => {
                        results.innerHTML = html;
                    });
            });
        });
    </script>
</head>
<body>
    <h1>ðŸ“š BÃ¼cher durchsuchen</h1>

    <p>
        <a href="{% url 'recommendations' %}">ðŸ“– Empfehlungen anzeigen</a> |
        <a href="{% url 'profile' %}">ðŸ‘¤ Mein Profil</a>
    </p>

    <input type="text" id="searchInput" placeholder="Buchtitel eingeben...">
    <ul id="bookResults">
        <!-- Suchergebnisse erscheinen hier -->
    </ul>

    <h2>ðŸŒŸ Beliebteste BÃ¼cher</h2>
    <ul>
        {% for book in books %}
        <li>
            <strong>{{ book.title }}</strong> von {{ book.author }}<br>
            ({{ book.count }} Bewertungen, Ã˜ {{ book.avg|floatformat:1 }}â˜…)<br>
            <a href="{% url 'rate_book' book.isbn %}">âž• Bewerten</a>
        </li>
        {% endfor %}
    </ul>
</body>
</html>
